From: Bastian Germann <bage@debian.org>
Date: Wed, 4 Sep 2024 20:07:45 +0200
Subject: Revert "progress_icon: Immediately redraw on accent color change"

This reverts commit f4c1f8832a3269ea36614f6d8967adf6c30ba3be.
---
 src/widgets/progress_icon.rs | 22 ++--------------------
 1 file changed, 2 insertions(+), 20 deletions(-)

diff --git a/src/widgets/progress_icon.rs b/src/widgets/progress_icon.rs
index 0f9e877..ecbce7f 100644
--- a/src/widgets/progress_icon.rs
+++ b/src/widgets/progress_icon.rs
@@ -1,7 +1,7 @@
 use gtk::{gdk, glib, graphene, gsk, prelude::*, subclass::prelude::*};
 
 pub(crate) mod imp {
-    use std::cell::{Cell, RefCell};
+    use std::cell::Cell;
 
     use super::*;
 
@@ -11,7 +11,6 @@ pub(crate) mod imp {
         #[property(get, set = Self::set_progress, minimum = 0.0,
                    maximum = 1.0, default = 0.0, explicit_notify)]
         pub progress: Cell<f32>,
-        pub signal_id: RefCell<Option<glib::SignalHandlerId>>,
     }
 
     #[glib::object_subclass]
@@ -25,24 +24,7 @@ pub(crate) mod imp {
     impl ObjectImpl for ProgressIcon {
         fn constructed(&self) {
             self.parent_constructed();
-            let obj = self.obj();
-
-            obj.set_valign(gtk::Align::Center);
-
-            let signal_id = adw::StyleManager::default().connect_accent_color_notify(glib::clone!(
-                #[weak(rename_to = progress_icon)]
-                obj,
-                move |_| {
-                    progress_icon.queue_draw();
-                }
-            ));
-            self.signal_id.replace(Some(signal_id));
-        }
-
-        fn dispose(&self) {
-            if let Some(signal_id) = self.signal_id.take() {
-                adw::StyleManager::default().disconnect(signal_id);
-            }
+            self.obj().set_valign(gtk::Align::Center);
         }
     }
 
